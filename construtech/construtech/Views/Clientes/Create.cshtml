@model construtech.Models.Cliente

@{
    ViewData["Title"] = "Agregar";
}
<style>
    .bd-placeholder-img {
    font-size: 1.125rem;
    text-anchor: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    }
    }
</style>
<div class="row">
    <div class="col-md-12">
        <form id="form" asp-action="Create">
            <div class="card text-center w-100">
                <div class="card-header bg-primary text-white">
                  <h2>Agregar cliente</h2>
                </div>
                <div class="card-body">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                  <div class="row">
                    <div class="col-6 mt-3">
                      <label asp-for="Nombre" class="form-label">Nombre cliente <span class="text-danger">*</span></label>
                      <input asp-for="Nombre" id="nombre" type="text" class="form-control" placeholder="Nombre" aria-label="Nombre">
                    </div>
                    <div class="col-6 mt-3">
                      <label asp-for="Email" class="form-label">Correo electrónico <span class="text-danger">*</span></label>
                      <input asp-for="Email" id="email" type="text" class="form-control" placeholder="Correo electrónico" aria-label="Correo electrónico">
                    </div>
                    <div class="col-6 mt-3">
                      <label asp-for="Direccion" class="form-label">Direccion </label>
                      <input asp-for="Direccion" id="direccion" type="text" class="form-control" placeholder="Dirección" aria-label="Dirección">
                    </div>
                    <div class="col-6 mt-3">
                      <label asp-for="Telefono" class="form-label">Teléfono <span class="text-danger">*</span></label>
                      <input asp-for="Telefono" id="telefono" type="text" class="form-control" placeholder="Teléfono" aria-label="Teléfono">
                    </div>
                    <div class="col-6 mt-3">
                      <label asp-for="Cedula" class="form-label">Cédula <span class="text-danger">*</span></label>
                      <input asp-for="Cedula" id="cedula" type="text" class="form-control" placeholder="Cédula" aria-label="Teléfono">
                    </div>
                    <div class="col-6 mt-3">
                      <label asp-for="Estado" class="form-label">Estado <span class="text-danger">*</span></label>
                      <select asp-for="Estado" id="estado" class="form-select form-select-sm" aria-label=".form-select-sm example">
                        <option value="activo">Activo</option>
                        <option value="inactivo">Inactivo</option>
                      </select>
                    </div>
                  </div>  
                </div>
                <div class="card-footer text-center">
                  <div class="row">
                    <div class="col-md-6">
                        <input id="add" type="submit" value="Create" class="btn btn-primary w-50" />

                    </div>
                    <div class="col-md-6">
                      <a type="button" asp-controller="Clientes" asp-action="Index" class="btn btn-danger w-50"><h4>Cancelar</h4></a>
                    </div>
                  </div>
                </div>
            </div>
        </form>
    </div>
</div>
<script type="text/javascript" src="~/lib/js/jquery-3.6.0.js"></script>
<script>
  


 $('#add').on('click', async function(){
        $("#form").submit(function (e) {
            e.preventDefault();
        })
    let cliente = $("#nombre").val();
    let email = $("#email").val();
    let direccion = $("#direccion").val();
    let telefono = $("#telefono").val();
    let cedula = $("#cedula").val();
    let estado = $("#estado").val();

    let errors = []
    await errors.push(alertconfirm("Nombre", cliente,'string',8))
    await errors.push(alertconfirm("Email", email,'string',50))
    await errors.push(alertconfirm("Dirección", direccion,'string',30))
    await errors.push(alertconfirm("Telefono", telefono,'int',10))
    await errors.push(alertconfirm("Cedula", cedula,'int',10))
    await errors.push(alertconfirm("Estado",estado,'string',8))            
    const allcheck =  array => array.every(value => value === array[0])
    const check = allcheck(errors)
    if (check) {
        $.confirm({
            title:"Cliente ingresado con exito!",
            content:"Redirecionando a listado de clientes...",
            icon: 'fa fa-check',
            theme: 'modern',
            closeIcon: true,
            animation: 'news',
            closeAnimation: 'news',
            type: 'green',
            columnClass:'col-md-6 col-md-offset-3',
            autoClose: 'okay|4000',
            buttons: {
                okay: function () {
                   $('#form').submit();
                },
            }            
        })     
      }else{
          $.confirm({
          title:"Error",
          content:errors,
          icon: 'fa fa-xmark',
          theme: 'modern',
          closeIcon: true,
          animation: 'news',
          closeAnimation: 'news',
          type: 'red',
        })
      }      
   
});
</script>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
